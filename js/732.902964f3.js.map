{"version":3,"file":"js/732.902964f3.js","mappings":"4JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,yDAAyD,CAAGN,EAAIO,MAAmEP,EAAIQ,OAA4FJ,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,8DAA8D,CAACF,EAAG,KAAK,CAACE,YAAY,wCAAwC,CAACN,EAAIS,GAAG,aAAaL,EAAG,IAAI,CAACE,YAAY,sBAAsB,CAACN,EAAIS,GAAG,MAAMT,EAAIU,GAAGV,EAAIW,QAAQC,UAAU,eAAeR,EAAG,IAAI,CAACS,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOhB,EAAU,OAAEiB,WAAW,WAAWX,YAAY,qBAAqB,CAACN,EAAIS,GAAGT,EAAIU,GAAGV,EAAIkB,WAAWd,EAAG,MAAM,CAACE,YAAY,6DAA6D,CAACF,EAAG,QAAQ,CAACE,YAAY,4FAA4Fa,MAAM,CAAC,KAAO,QAAQC,SAAS,CAAC,MAAQpB,EAAIqB,YAAYjB,EAAG,SAAS,CAACE,YAAY,sCAAsCgB,GAAG,CAAC,MAAQtB,EAAIuB,aAAa,CAACnB,EAAG,MAAM,CAACS,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOhB,EAAS,MAAEiB,WAAW,UAAUX,YAAY,UAAUa,MAAM,CAAC,KAAO,OAAO,OAAS,eAAe,eAAe,IAAI,QAAU,YAAY,MAAQ,+BAA+B,CAACf,EAAG,OAAO,CAACe,MAAM,CAAC,EAAI,mKAAmK,iBAAiB,QAAQ,kBAAkB,iBAAiBf,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,IAAI,CAACE,YAAY,6GAA6Ga,MAAM,CAAC,KAAOnB,EAAIwB,MAAM,CAACxB,EAAIS,GAAG,qBAArhDL,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIkB,QAAU,QAAQ,OAArJd,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIS,GAAG,iBACrOgB,EAAkB,GCwCtB,GACEX,KAAM,gBACNY,KAAM,KAAM,CACVf,QAAS,KACTO,OAAQ,KACRX,OAAO,EACPC,QAAQ,EACRgB,IAAK,KACLH,SAAU,OAEZM,QAAS,CACPJ,aACOK,UAAUC,UAIfD,UAAUC,UAChBC,UAAA,eACAC,MAAA,0BACAC,OAAA,2BANQ/B,KAAKiB,OAAS,iBASpBe,gBAEE,GADAhC,KAAKU,cAAgBV,KAAKiC,WACrBjC,KAAKU,QAAV,CAMA,IACJwB,MAAAA,QAAAA,KAAAA,SAAAA,SACA,wCAMM,OAFAC,QAAQC,KAAK,kBACbpC,KAAKM,OAAQ,GAHbN,KAAKO,QAAS,EAMhB,IACE,MAAM8B,QAAYrC,KAAKsC,OAAOC,IAAI,eAClCvC,KAAKuB,IAAMc,EAAIZ,KAAKF,IACpBvB,KAAKoB,SAAWiB,EAAIZ,KAAKL,SAC/B,SACMpB,KAAKiB,OAAS,cACdkB,QAAQK,MAAMA,GANnB,QAQKxC,KAAKM,OAAQ,OAxBf,CACE,MAAMmC,EAAQ,4CACRlB,EAAM,mCAAgDmB,mBAAmBD,KAC/EE,SAASC,OAAOrB,MCpEmP,I,UCOrQsB,GAAY,OACd,EACA/C,EACA0B,GACA,EACA,KACA,KACA,MAIF,EAAeqB,EAAiB","sources":["webpack://openchat/./src/views/AdminRoomView.vue?e2b4","webpack://openchat/src/views/AdminRoomView.vue","webpack://openchat/./src/views/AdminRoomView.vue?6140","webpack://openchat/./src/views/AdminRoomView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-wrap w-full justify-center bg-sky-500 py-20\"},[(!_vm.ready)?_c('div',{staticClass:\"text-white\"},[_vm._v(\" 載入中... \")]):(!_vm.access)?_c('div',{staticClass:\"text-white\"},[_vm._v(\" \"+_vm._s(_vm.status || \"存取遭拒\")+\" \")]):_c('div',[_c('div',{staticClass:\"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg\"},[_c('h2',{staticClass:\"text-gray-800 text-3xl font-semibold\"},[_vm._v(\"加入管理層社群\")]),_c('p',{staticClass:\"mt-2 text-gray-600\"},[_vm._v(\"你好，\"+_vm._s(_vm.profile.nickname)+\"，這裡是加入密碼：\")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status),expression:\"status\"}],staticClass:\"mt-2 text-red-600\"},[_vm._v(_vm._s(_vm.status))]),_c('div',{staticClass:\"w-full mt-2 text-gray-600 flex rounded bg-white shadow-md\"},[_c('input',{staticClass:\"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.password}}),_c('button',{staticClass:\"m-2 rounded px-4 py-2 font-semibold\",on:{\"click\":_vm.copySecret}},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ready),expression:\"ready\"}],staticClass:\"h-6 w-6\",attrs:{\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"viewBox\":\"0 0 24 24\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])])]),_c('div',{staticClass:\"flex justify-end mt-4\"},[_c('a',{staticClass:\"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\",attrs:{\"href\":_vm.url}},[_vm._v(\" 加入連結在這裡 \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex flex-wrap w-full justify-center bg-sky-500 py-20\">\n    <div v-if=\"!ready\" class=\"text-white\">\n      載入中...\n    </div>\n    <div v-else-if=\"!access\" class=\"text-white\">\n      {{ status || \"存取遭拒\" }}\n    </div>\n    <div v-else>\n      <div class=\"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg\">\n        <h2 class=\"text-gray-800 text-3xl font-semibold\">加入管理層社群</h2>\n        <p class=\"mt-2 text-gray-600\">你好，{{ profile.nickname }}，這裡是加入密碼：</p>\n        <p v-show=\"status\" class=\"mt-2 text-red-600\">{{ status }}</p>\n        <div class=\"w-full mt-2 text-gray-600 flex rounded bg-white shadow-md\">\n          <input :value=\"password\"\n                 class=\"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\"\n                 type=\"text\">\n          <button class=\"m-2 rounded px-4 py-2 font-semibold\" @click=\"copySecret\">\n            <svg v-show=\"ready\" class=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\n                 viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                  d=\"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"flex justify-end mt-4\">\n          <a\n              :href=\"url\"\n              class=\"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\"\n          >\n            加入連結在這裡\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AdminRoomView\",\n  data: () => ({\n    profile: null,\n    status: null,\n    ready: false,\n    access: false,\n    url: null,\n    password: null\n  }),\n  methods: {\n    copySecret() {\n      if (!navigator.clipboard) {\n        this.status = '您的瀏覽器不支援複製功能'\n        return\n      }\n      navigator.clipboard\n          .writeText(this.password)\n          .then(() => this.status = '已複製代碼')\n          .catch(() => this.status = '無法複製代碼')\n    },\n  },\n  async created() {\n    this.profile = await this.$profile();\n    if (!this.profile) {\n      const refer = `${process.env.VUE_APP_SELF_HOST}/#/admin/room`;\n      const url = `${process.env.VUE_APP_SARA_INTE_HOST}/?refer=${encodeURIComponent(refer)}`;\n      location.assign(url);\n      return;\n    }\n    if (\n        Array.isArray(this.profile?.roles) &&\n        this.profile.roles.includes('openchat')\n    ) {\n      this.access = true;\n    } else {\n      console.warn(\"Forbidden\");\n      this.ready = true;\n      return;\n    }\n    try {\n      const xhr = await this.$axios.get('/admin-room');\n      this.url = xhr.data.url;\n      this.password = xhr.data.password;\n    } catch (error) {\n      this.status = '授權伺服器發生嚴重錯誤';\n      console.error(error);\n    } finally {\n      this.ready = true;\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminRoomView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminRoomView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminRoomView.vue?vue&type=template&id=6e80438c&\"\nimport script from \"./AdminRoomView.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminRoomView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ready","access","_v","_s","profile","nickname","directives","name","rawName","value","expression","status","attrs","domProps","password","on","copySecret","url","staticRenderFns","data","methods","navigator","clipboard","writeText","then","catch","async","$profile","Array","console","warn","xhr","$axios","get","error","refer","encodeURIComponent","location","assign","component"],"sourceRoot":""}